import{j as e,B as v,h as p,r as c,I as x,q as P,P as A,M as E,t as w,v as f,a8 as L,a7 as D,a9 as C,F as W,l as H,S as M,J as g,K as z}from"./index-B2pnsSDI.js";import{C as B}from"./config-global-aAJgsVZ4.js";import{T as j,a as d,b as U,c as $,d as G,e as q,f as J}from"./TableSortLabel-B2gouoha.js";import{L as K}from"./label-BawK3FG8.js";import{C as k}from"./Checkbox-CT45B3ZF.js";import{O as Q}from"./Select-D3U3HWGl.js";import{C as V}from"./Card-B3Y7gnnt.js";import{T as _}from"./TablePagination-DT-p2zNB.js";import"./LastPage-DX3wmTw6.js";function X({searchQuery:s,...r}){return e.jsx(j,{...r,children:e.jsx(d,{align:"center",colSpan:7,children:e.jsxs(v,{sx:{py:15,textAlign:"center"},children:[e.jsx(p,{variant:"h6",sx:{mb:1},children:"Not found"}),e.jsxs(p,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',s,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}function Y({row:s,selected:r,onSelectRow:n}){const[t,o]=c.useState(null),a=c.useCallback(i=>{o(i.currentTarget)},[]),l=c.useCallback(()=>{o(null)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(j,{hover:!0,tabIndex:-1,role:"checkbox",selected:r,children:[e.jsx(d,{padding:"checkbox",children:e.jsx(k,{disableRipple:!0,checked:r,onChange:n})}),e.jsx(d,{children:s.id}),e.jsx(d,{children:s.name}),e.jsx(d,{children:s.initDate}),e.jsx(d,{children:s.endDate}),e.jsx(d,{children:e.jsx(K,{color:s.status==="banned"&&"error"||"success",children:s.status})}),e.jsx(d,{align:"center",children:s.isVerified?e.jsx(x,{width:22,icon:"solar:check-circle-bold",sx:{color:"success.main"}}):"-"}),e.jsx(d,{children:s.owner}),e.jsx(d,{children:s.assigned}),e.jsx(d,{align:"right",children:e.jsx(P,{onClick:a,children:e.jsx(x,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(A,{open:!!t,anchorEl:t,onClose:l,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},children:e.jsxs(E,{disablePadding:!0,sx:{p:.5,gap:.5,width:140,display:"flex",flexDirection:"column",[`& .${w.root}`]:{px:1,gap:2,borderRadius:.75,[`&.${w.selected}`]:{bgcolor:"action.selected"}}},children:[e.jsxs(f,{onClick:l,children:[e.jsx(x,{icon:"solar:pen-bold"}),"Ver"]}),e.jsxs(f,{onClick:l,children:[e.jsx(x,{icon:"solar:pen-bold"}),"Editar"]}),e.jsxs(f,{onClick:l,sx:{color:"error.main"},children:[e.jsx(x,{icon:"solar:trash-bin-trash-bold"}),"Eliminar"]})]})})]})}const Z={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function ee(s,r,n){return s?Math.max(0,(1+s)*r-n):0}function T(s,r,n){return r[n]<s[n]?-1:r[n]>s[n]?1:0}function se(s,r){return s==="desc"?(n,t)=>T(n,t,r):(n,t)=>-T(n,t,r)}function ne({inputData:s,comparator:r,filterName:n}){const t=s.map((o,a)=>[o,a]);return t.sort((o,a)=>{const l=r(o[0],a[0]);return l!==0?l:o[1]-a[1]}),s=t.map(o=>o[0]),n&&(s=s.filter(o=>o.name.toLowerCase().indexOf(n.toLowerCase())!==-1)),s}function re({order:s,onSort:r,orderBy:n,rowCount:t,headLabel:o,numSelected:a,onSelectAllRows:l}){return e.jsx(U,{children:e.jsxs(j,{children:[e.jsx(d,{padding:"checkbox",children:e.jsx(k,{indeterminate:a>0&&a<t,checked:t>0&&a===t,onChange:i=>l(i.target.checked)})}),o.map(i=>e.jsx(d,{align:i.align||"left",sortDirection:n===i.id?s:!1,sx:{width:i.width,minWidth:i.minWidth},children:e.jsxs($,{hideSortIcon:!0,active:n===i.id,direction:n===i.id?s:"asc",onClick:()=>r(i.id),children:[i.label,n===i.id?e.jsx(v,{sx:{...Z},children:s==="desc"?"sorted descending":"sorted ascending"}):null]})},i.id))]})})}function te({emptyRows:s,height:r,sx:n,...t}){return s?e.jsx(j,{sx:{...r&&{height:r*s},...n},...t,children:e.jsx(d,{colSpan:9})}):null}function ae({numSelected:s,filterName:r,onFilterName:n}){return e.jsxs(L,{sx:{height:96,display:"flex",justifyContent:"space-between",p:t=>t.spacing(0,1,0,3),...s>0&&{color:"primary.main",bgcolor:"primary.lighter"}},children:[s>0?e.jsxs(p,{component:"div",variant:"subtitle1",children:[s," selected"]}):e.jsx(Q,{fullWidth:!0,value:r,onChange:n,placeholder:"Search user...",startAdornment:e.jsx(D,{position:"start",children:e.jsx(x,{width:20,icon:"eva:search-fill",sx:{color:"text.disabled"}})}),sx:{maxWidth:320}}),s>0?e.jsx(C,{title:"Delete",children:e.jsx(P,{children:e.jsx(x,{icon:"solar:trash-bin-trash-bold"})})}):e.jsx(C,{title:"Filter list",children:e.jsx(P,{children:e.jsx(x,{icon:"ic:round-filter-list"})})})]})}function ie(){const s=oe(),[r,n]=c.useState(""),t=ne({inputData:g,comparator:se(s.order,s.orderBy),filterName:r}),o=!t.length&&!!r;return e.jsxs(W,{children:[e.jsxs(v,{display:"flex",alignItems:"center",mb:5,children:[e.jsx(p,{variant:"h4",flexGrow:1,children:"Tareas"}),e.jsx(H,{variant:"contained",color:"inherit",startIcon:e.jsx(x,{icon:"mingcute:add-line"}),children:"Nueva Tarea"})]}),e.jsxs(V,{children:[e.jsx(ae,{numSelected:s.selected.length,filterName:r,onFilterName:a=>{n(a.target.value),s.onResetPage()}}),e.jsx(M,{children:e.jsx(G,{sx:{overflow:"unset"},children:e.jsxs(q,{sx:{minWidth:800},children:[e.jsx(re,{order:s.order,orderBy:s.orderBy,rowCount:g.length,numSelected:s.selected.length,onSort:s.onSort,onSelectAllRows:a=>s.onSelectAllRows(a,g.map(l=>l.id)),headLabel:[{id:"id",label:"Id"},{id:"name",label:"Nombre"},{id:"initDate",label:"Fecha inicio"},{id:"endDate",label:"Fecha termino"},{id:"status",label:"Estatus"},{id:"level",label:"Nivel"},{id:"owner",label:"Asignado por"},{id:"assigned",label:"Responsable"},{id:""}]}),e.jsxs(J,{children:[t.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage).map(a=>e.jsx(Y,{row:a,selected:s.selected.includes(a.id),onSelectRow:()=>s.onSelectRow(a.id)},a.id)),e.jsx(te,{height:68,emptyRows:ee(s.page,s.rowsPerPage,g.length)}),o&&e.jsx(X,{searchQuery:r})]})]})})}),e.jsx(_,{component:"div",page:s.page,count:g.length,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:s.onChangeRowsPerPage})]})]})}function oe(){const[s,r]=c.useState(0),[n,t]=c.useState("name"),[o,a]=c.useState(5),[l,i]=c.useState([]),[b,S]=c.useState("asc"),R=c.useCallback(h=>{S(n===h&&b==="asc"?"desc":"asc"),t(h)},[b,n]),y=c.useCallback((h,u)=>{if(h){i(u);return}i([])},[]),I=c.useCallback(h=>{const u=l.includes(h)?l.filter(N=>N!==h):[...l,h];i(u)},[l]),m=c.useCallback(()=>{r(0)},[]),F=c.useCallback((h,u)=>{r(u)},[]),O=c.useCallback(h=>{a(parseInt(h.target.value,10)),m()},[m]);return{page:s,order:b,onSort:R,orderBy:n,selected:l,rowsPerPage:o,onSelectRow:I,onResetPage:m,onChangePage:F,onSelectAllRows:y,onChangeRowsPerPage:O}}function be(s){return e.jsxs(e.Fragment,{children:[e.jsx(z,{children:e.jsxs("title",{children:[" ",`Tareas - ${B.appName}`]})}),e.jsx(ie,{})]})}export{be as default};
